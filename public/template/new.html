<h1 class="page-header">{{$ctrl.report.id ? '修改报告' : '新建报告'}}</h1>
<div class="alert alert-warning alert-dismissible" role="alert" ng-show="$ctrl.alert">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <strong>{{$ctrl.rule}}</strong> {{$ctrl.errMsg}}
</div>
<div class="alert alert-success alert-dismissible" role="alert" ng-show="$ctrl.success">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <strong>{{$ctrl.successMsg}}</strong>
</div>
<div class="form-group">
  <input type="text" class="form-control" id="name" ng-model="$ctrl.report.reportName" placeholder="报告名称" required>
</div>
<div class="form-horizontal">
  <div class="form-group">
    <div class="col-sm-2">报告执行类型:</div>
    <div class="col-sm-10">
      <label>
        <input type="radio" name="execute_type" ng-model="$ctrl.report.execute_type" value="circle"> 循环执行
      </label>
      <label>
        <input type="radio" name="execute_type" ng-model="$ctrl.report.execute_type" value="once"> 一次性执行
      </label>
    </div>
  </div>
  <div class="form-group" ng-show="$ctrl.report.execute_type == 'once'">
    <div class="col-sm-2">开始执行时间:</div>
    <div class="col-sm-10">
      <p class="input-group col-sm-4">
        <uix-datepicker ng-model="$ctrl.report.once_scheduled_execute_time" min-date="$ctrl.minDate"></uix-datepicker>
      </p>
    </div>
  </div>
  <div class="form-group" ng-show="$ctrl.report.execute_type == 'circle'">
    <div class="col-sm-2">循环开始时间:</div>
    <div class="col-sm-10">
      <p class="input-group col-sm-4">
        <uix-datepicker ng-model="$ctrl.report.circle_scheduled_start_time" min-date="$ctrl.minDate"></uix-datepicker>
      </p>
    </div>
  </div>
  <div class="form-group" ng-show="$ctrl.report.execute_type == 'circle'">
    <div class="col-sm-2">循环结束时间:</div>
    <div class="col-sm-10">
      <p class="input-group col-sm-4">
        <uix-datepicker ng-model="$ctrl.report.circle_scheduled_finish_time" min-date="$ctrl.report.circle_scheduled_start_time"></uix-datepicker>
      </p>
    </div>
  </div>

  <div class="form-group" ng-show="$ctrl.report.execute_type == 'circle'">
    <div class="col-sm-2">循环间隔分钟数:</div>
    <div class="col-sm-10">
      <div class="form-inline">
          <div class="form-group mlr0">
            <div class="input-group">
              <input type="number" min="1" class="form-control" name="circle_scheduled_interval_day" ng-model="$ctrl.report.circle_scheduled_interval_day">
              <div class="input-group-addon">天</div>
            </div>
          </div>
          <div class="form-group mlr0">
            <div class="input-group">
              <input type="number" min="1" class="form-control" name="circle_scheduled_interval_minutes" ng-model="$ctrl.report.circle_scheduled_interval_hour">
              <div class="input-group-addon">小时</div>
            </div>
          </div>
          <div class="form-group mlr0">
            <div class="input-group">
              <input type="number" step="10" min="1" class="form-control" name="circle_scheduled_interval_minutes" ng-model="$ctrl.report.circle_scheduled_interval_minute" placeholder="分钟" ng-required="true">
              <div class="input-group-addon">分钟</div>
            </div>
          </div>
      </div>
    </div>
  </div>
</div>
<div class="editormd" id="editor">
    <textarea>{{$ctrl.report.reportContent}}</textarea>
</div>
<div class="new-opt-btns pull-right">
  <button type="button" class="btn btn-default btn-sm" ng-click="$ctrl.preview($event)" data-loading-text="预览中，请稍候..." ng-show="$ctrl.state">预 览</button>
  <button type="button" class="btn btn-default btn-sm" ng-click="$ctrl.closePreview($event)" ng-show="!$ctrl.state">关闭预览</button>
  <button type="button" class="btn btn-primary btn-sm" ng-click="$ctrl.save($event)" data-loading-text="保存中，请稍候...">保 存</button>
</div>
